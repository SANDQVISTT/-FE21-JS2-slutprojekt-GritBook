{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCCAAD,EAAAC,EAAA,sBDKK,MACH,IAAIC,EAAaC,eAAeC,QAAQ,QACpCC,EAASF,eAAeC,QAAQ,cAChCE,EAAkB,OAAXD,EAAkBH,EAAaG,EAEtC,MAAEE,EAAQP,EAAAQ,IAAIC,EAAAC,GAAI,mBAAmBJ,EAAKK,iBAC9CX,EAAAY,IAAIL,GAAOM,MAAMC,IACf,GAAIA,EAASC,SAAU,CAErB,MAdNC,SAccA,EAddC,IAcwBA,EAdxBC,OAc6BA,EAd7BC,WAcqCA,GAAeL,EAASM,MACzBC,SAASC,cAAc,aACjDC,IAAMJ,EAEV,MAAMK,EAAoBH,SAASC,cAAc,eAC3CG,EAAuBJ,SAASC,cAAc,aAC1BD,SAASC,cAAc,UAE5CI,UAAYT,EACjBQ,EAAQC,UAAYR,EACpBM,EAAKE,UAAYV,EACjBb,eAAewB,WAAW,mBApB3B,GCDE,WACL,MAAMC,EAAmBP,SAASQ,eAChC,kBAEFD,EAAiBE,MAAMC,QAAU,OAGjC,IAAI7B,EAAaC,eAAeC,QAAQ,QACpCC,EAASF,eAAeC,QAAQ,cAChC4B,EAAyB,OAAX3B,EAAkBH,EAAaG,EAE7CF,eAAeC,QAAQ,SAAW4B,IACpCJ,EAAiBE,MAAMC,QAAU,QAEjCH,EAAiBK,iBAAiB,SAAUC,IAE1C,GADuBC,QAAQ,iBACT,CACpB,MAAMC,EAAapC,EAAAQ,IACjBC,EAAAC,GACA,mBAAqBP,eAAeC,QAAQ,SAE9CD,eAAekC,QACfrC,EAAAsC,OAAOF,GACPG,OAAOC,SAASC,KAAO,oBAEvBb,EAAiBE,MAAMC,QAAU,WDCzCW,GACAC,EAAAC","sources":["src/modules/profile.ts","src/modules/deleteUser.ts"],"sourcesContent":["import { ref, get, DataSnapshot } from \"firebase/database\";\r\nimport { db } from \"./firebaseApp\";\r\nimport { logOut } from \"./logout\";\r\nimport { deleteProfile } from \"./deleteUser\";\r\n// om du har tryckt på ett namn i home.html så får du ett värde i din sessionStorage\r\n(() => {\r\n  let usernameID = sessionStorage.getItem(\"user\");\r\n  let target = sessionStorage.getItem(\"targetUser\");\r\n  let test = target === null ? usernameID : target;\r\n//är värdet i target null så tar den usernameID och fortsätter\r\n  const dbRef = ref(db, `/users/userInfo/${test.toLowerCase()}`);\r\n  get(dbRef).then((snapshot: DataSnapshot) => {\r\n    if (snapshot.exists()) {\r\n        // om användaren finns så hämtar vi deras Info och sätter ut i domen\r\n      const { username, bio, gender, profilePic } = snapshot.val();\r\n      const img: HTMLInputElement = document.querySelector(\"#ProfileP\");\r\n      img.src = profilePic;\r\n\r\n      const namn: HTMLElement = document.querySelector(\"#UsernameID\");\r\n      const genders: HTMLElement = document.querySelector(\"#genderID\");\r\n      const bios: HTMLElement = document.querySelector(\"#bioID\");\r\n\r\n      bios.innerText = bio;\r\n      genders.innerText = gender;\r\n      namn.innerText = username;\r\n      sessionStorage.removeItem(\"targetUser\");\r\n    }\r\n  });\r\n})();\r\n\r\ndeleteProfile();\r\nlogOut();\r\n","import { ref, remove } from \"firebase/database\";\r\nimport { db } from \"./firebaseApp\";\r\n\r\n/* Function for deleting your own profile */\r\nexport function deleteProfile(): void {\r\n  const deleteProfileBtn = document.getElementById(\r\n    \"delete-account\"\r\n  ) as HTMLButtonElement;\r\n  deleteProfileBtn.style.display = \"none\";\r\n\r\n  /* temporary solution */\r\n  let usernameID = sessionStorage.getItem(\"user\");\r\n  let target = sessionStorage.getItem(\"targetUser\");\r\n  let currentUser = target === null ? usernameID : target;\r\n  /* checks if current user is logged in or not */\r\n  if (sessionStorage.getItem(\"user\") == currentUser) {\r\n    deleteProfileBtn.style.display = \"block\";\r\n\r\n    deleteProfileBtn.addEventListener(\"click\", (e) => {\r\n      let deleteAccountBtn = confirm(\"Are you sure?\");\r\n      if (deleteAccountBtn) {\r\n        const deleteUser = ref(\r\n          db,\r\n          \"/users/userInfo/\" + sessionStorage.getItem(\"user\")\r\n        );\r\n        sessionStorage.clear();\r\n        remove(deleteUser);\r\n        window.location.href = \"./index.html\";\r\n      } else {\r\n        deleteProfileBtn.style.display = \"none\";\r\n      }\r\n    });\r\n  }\r\n}\r\n"],"names":["$8tedJ","parcelRequire","usernameID","sessionStorage","getItem","target","test","dbRef","ref","$7McF0","db","toLowerCase","get","then","snapshot","exists","username","bio","gender","profilePic","val","document","querySelector","src","namn","genders","innerText","removeItem","deleteProfileBtn","getElementById","style","display","currentUser","addEventListener","e","confirm","deleteUser","clear","remove","window","location","href","$2630b93c6c48c313$export$29d101fdcde3d3d3","$9Mg9r","logOut"],"version":3,"file":"profile.2d7ef848.js.map"}